digraph signaling {
  CLOSED_OK [style="filled", fillcolor="green3"];
  CLOSED_ERR [style="filled", fillcolor="firebrick1"];

  CONNECTING [style="filled", fillcolor="dodgerblue"];

  CONNECTING -> CONNECTING [label="on error"];

  CONNECTING -> CONNECTED [label="websocket connection established"];

  CONNECTED -> JOINING [label="room join request received"];

  JOINING -> JOINED [label="room join successful"];

  JOINED -> SUBSCRIBED [label="room subscription successful"];

  {CONNECTED, JOINING, JOINED, SUBSCRIBED} -> CLOSED_ERR [label="on error"];

  SUBSCRIBED -> CLOSED_OK [label="on client close"];
}

